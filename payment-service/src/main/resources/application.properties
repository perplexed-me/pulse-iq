spring.application.name=pulseiq

# Server Configuration
server.port=8082
# server.servlet.context-path=/payment  # Commented out to remove context path - endpoints now available at /payments directly

# Explicit port override (to ensure it's not overridden)
spring.config.activate.on-profile=default
management.server.port=8082

# Database Configuration - PostgreSQL
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/Billing}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.default_schema=${SPRING_JPA_PROPERTIES_HIBERNATE_DEFAULT_SCHEMA:payment}
logging.level.org.hibernate.SQL=DEBUG

# SSLCOMMERZ Configuration - Sandbox Credentials
sslcommerz.store.id=${SSLCOMMERZ_STORE_ID:testbox}
sslcommerz.store.password=${SSLCOMMERZ_STORE_PASSWORD}
sslcommerz.api.url=${SSLCOMMERZ_API_URL:https://sandbox.sslcommerz.com/gwprocess/v4/api.php}
sslcommerz.success.url=${SSLCOMMERZ_SUCCESS_URL:http://${PUBLIC_IP:132.196.64.104}:8082/payments/success}
sslcommerz.fail.url=${SSLCOMMERZ_FAIL_URL:http://${PUBLIC_IP:132.196.64.104}:8082/payments/fail}
sslcommerz.cancel.url=${SSLCOMMERZ_CANCEL_URL:http://${PUBLIC_IP:132.196.64.104}:8082/payments/cancel}
sslcommerz.ipn.url=${SSLCOMMERZ_IPN_URL:http://${PUBLIC_IP:132.196.64.104}:8082/api/payments/ipn}

# Logging - Enable detailed logging for debugging
logging.level.com.pulseiq=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.apache.http=DEBUG
logging.level.org.springframework.security=DEBUG


# CORS Configuration - Updated for Azure deployment
spring.web.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://132.196.64.104:8080}
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS,HEAD
spring.web.cors.allowed-headers=*
spring.web.cors.allow-credentials=true

# Email Configuration (Gmail SMTP)
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=${MAIL_HOST:smtp.gmail.com}
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# Application Email Settings
app.email.from=${MAIL_USERNAME}
app.email.name=${APP_EMAIL_NAME:PulseIQ Payment System}
