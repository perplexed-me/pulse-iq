# Test configuration for CI/CD
# This file is used during testing to avoid dependency injection issues

# Database configuration for testing
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/pulseiq_db_test?currentSchema=pulseiq}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:test_user}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:test_password}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.properties.hibernate.default_schema=pulseiq

# JPA/Hibernate configuration for tests
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Connection pool settings for tests (minimal)
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.maximum-pool-size=3
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.initialization-fail-timeout=0

# JWT configuration for tests (MUST be at least 32 characters for HMAC SHA)
jwt.secret=${JWT_SECRET:test_jwt_secret_for_ci_only_minimum_32_characters_long_enough}
jwt.expiration=86400000

# Firebase configuration for tests (disabled)
firebase.enabled=false

# CORS configuration for tests
app.cors.allowed-origins=http://localhost:8080,http://localhost:3000

# Server configuration for tests
server.port=8085
server.address=0.0.0.0

# Actuator for health checks
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always

# Logging for tests
logging.level.com.pulseiq=INFO
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN
