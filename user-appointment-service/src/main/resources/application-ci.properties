# CI configuration for GitHub Actions
# This file is used specifically for CI/CD pipeline testing

# Database configuration for CI testing
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/pulseiq_db_test?currentSchema=pulseiq}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:test_user}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:test_password}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.properties.hibernate.default_schema=pulseiq

# JPA/Hibernate configuration for CI
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Connection pool settings for CI (minimal)
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.maximum-pool-size=3
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.initialization-fail-timeout=0

# JWT configuration for CI (MUST be at least 32 characters for HMAC SHA)
jwt.secret=${JWT_SECRET:test_jwt_secret_for_ci_only_minimum_32_characters_long_enough}
jwt.expiration=86400000

# Firebase configuration for CI (disabled)
firebase.enabled=false

# CORS configuration for CI
app.cors.allowed-origins=http://localhost:8080,http://localhost:3000

# Server configuration for CI
server.port=8085
server.address=0.0.0.0

# Actuator for health checks
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always

# Logging for CI (reduced output)
logging.level.com.pulseiq=INFO
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.com.zaxxer.hikari=WARN
logging.level.org.springframework.boot.autoconfigure=WARN

# Disable unnecessary features for CI
spring.jpa.open-in-view=false
